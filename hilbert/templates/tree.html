<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>{{title}}</title>
<link rel="stylesheet" href="/static/tree.css">
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.0.0"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.csv.js?2.0.0"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.time.js?2.0.0"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?2.0.0"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
<script type="text/javascript" src="/static/tree.js"></script>
</head>
<body>
<div class="header">
  <h2>
  {% for t in treenames %}
  <a href="/tree/{{t}}">{{t}}</a>
  {% endfor %}
  </h2>
</div>
<div class="container">
  <button>Randomise</button>
  <div class="chart">
  </div>
  <script>
    var w = 1000;
    var h = 400;
    var radius = 8;
    var cursorRadius = radius * 3;
    var padding = 20;
    var tree = d3.layout.tree()
    .size([w-10, h-10])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });
    diagonal = d3.svg.diagonal()

    var vis = d3.select(".chart").append("svg")
    .attr("width", w)
    .attr("height", h)
    .style("padding", padding + "px")

    var dataUrl = "/tree/{{treename}}/data";
    d3.select("button").on("click", function() {
      drawTree(dataUrl);
    })
    drawTree(dataUrl);
  </script>
</div>
</body>
</html>
